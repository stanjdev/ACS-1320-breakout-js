(()=>{"use strict";const t=class{constructor(t=0,s=0,e=100,i=100,h="#f00"){this.x=t,this.y=s,this.width=e,this.height=i,this.color=h}moveTo(t,s){this.x=t,this.y=s}moveBy(t,s){this.x+=t,this.y+=s}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}},s=class extends t{constructor(t,s,e,i,h="#0095DD",r="16px Arial"){super(e,i,h),this.label=t,this.numberValue=s,this.x=e,this.y=i,this.color=h,this.font=r}render(t){const s=this.label,e=s.charAt(0).toUpperCase()+s.slice(1);t.font=this.font,t.fillStyle=this.color,t.fillText(`${e}: ${this.numberValue}`,this.x,this.y)}update(t=1){"score"===this.label?this.numberValue+=t:"level"===this.label?this.numberValue+=1:"lives"===this.label&&(this.numberValue-=1)}reset(){if("lives"===this.label){const t=this.numberValue;this.numberValue=t}else this.numberValue=0}},e=class extends t{constructor(t,s,e=75,i=20,h="#0095DD"){super(t,s,e,i,h),this.status=!0}},i=document.getElementById("myCanvas"),h=i.getContext("2d"),r=new class extends t{constructor(t=0,s=0,e=10,i="#E96969",h=2){super(t,s,2*e,2*e,i),this.radius=e,this.dx=h,this.dy=-h,this.ballSpeed=h}move(){this.x+=this.dx,this.y+=this.dy}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}increaseSpeed(){this.ballSpeed+=1}}(200,200,10),l=new class extends t{constructor(t,s,e=75,i=10,h="#0095DD"){super(t,s,e,i,h)}}((i.width-75)/2,i.height-10,75,10),o=new s("score",0,8,20);o.reset();const n=new s("lives",3,i.width-65,20);n.reset();const c=new s("level",1,i.width/2.2,20),d=new class extends t{constructor(t,s,e="lightgreen"){super(),this.width=t,this.height=s,this.color=e}render(t){t.fillStyle=this.color,t.fillRect(0,0,this.width,this.height)}}(i.width,i.height),a=new class{constructor(t,s,i,h,r,l,o,n,c,d){this.ball=t,this.bricks=new class{constructor(t=3,s=5){this.rows=t,this.cols=s,this.bricks=[],this.brickPadding=10,this.brickOffsetTop=30,this.brickOffsetLeft=30,this.currentBricks=0,this.setup()}setup(){for(let t=0;t<this.rows*this.cols;t+=1){const s=Math.floor(t/this.cols);this.bricks[t]=new e(0,0,void 0,void 0,s%2==0?"orange":"crimson")}this.currentBricks=this.rows*this.cols}render(t){for(let s=0;s<this.bricks.length;s+=1){const e=s%this.cols,i=Math.floor(s/this.cols),h=this.bricks[s];if(!0===h.status){const s=e*(h.width+this.brickPadding)+this.brickOffsetLeft,r=i*(h.height+this.brickPadding)+this.brickOffsetTop;h.x=s,h.y=r,h.render(t)}}}}(3,5),this.paddle=s,this.level=i,this.score=h,this.lives=r,this.ctx=l,this.width=o,this.height=n,this.background=c,this.canvas=d,this.rightPressed=!1,this.leftPressed=!1,this.bricks.setup()}initGame(){this.ball.x=this.width/2,this.ball.y=this.height-30,this.ball.dx=this.ball.ballSpeed,this.ball.dy=-this.ball.ballSpeed,this.paddle.x=(this.width-this.paddle.width)/2}incrementSettings(){this.level.update(),this.ball.increaseSpeed(),this.bricks.rows+=1}drawBricks(){this.bricks.render(this.ctx)}randomColor(){const t="0123456789ABCDEF";let s="#";for(let e=0;e<6;e+=1)s+=t[Math.floor(Math.random()*t.length)];return s}collisionDetection(){for(let t=0;t<this.bricks.bricks.length;t+=1){const s=this.bricks.bricks[t];!0===s.status&&this.ball.x>s.x&&this.ball.x<s.x+s.width&&this.ball.y>s.y&&this.ball.y<s.y+s.height&&(this.ball.dy=-this.ball.dy,this.ball.color=this.randomColor(),this.bricks.currentBricks-=1,this.score.update(1),s.status=!1,0===this.bricks.currentBricks&&(this.incrementSettings(),this.initGame(),this.bricks.setup()))}}}(r,l,c,o,n,h,i.width,i.height,d,i);document.addEventListener("keydown",(function(t){"Right"===t.key||"ArrowRight"===t.key?a.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(a.leftPressed=!0)}),!1),document.addEventListener("keyup",(function(t){"Right"===t.key||"ArrowRight"===t.key?a.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(a.leftPressed=!1)}),!1),document.addEventListener("mousemove",(function(t){const s=t.clientX-i.offsetLeft;s>0&&s<i.width&&(l.x=s-37.5)}),!1),function t(){h.clearRect(0,0,i.width,i.height),d.render(h),a.drawBricks(),a.collisionDetection(),r.move(),r.render(h),l.render(h),o.render(h),n.render(h),c.render(h),(r.x+r.dx>i.width-r.radius||r.x+r.dx<r.radius)&&(r.dx=-r.dx),r.y+r.dy<r.radius?r.dy=-r.dy:r.y+r.dy>i.height-r.radius&&(r.x>l.x&&r.x<l.x+75?(r.color=a.randomColor(),d.color=a.randomColor(),l.color=a.randomColor(),o.color=a.randomColor(),n.color=a.randomColor(),c.color=a.randomColor(),r.dy=-r.dy):(n.update(),n.numberValue?a.initGame():document.location.reload())),!0===a.rightPressed?(l.x+=7,l.x+75>i.width&&(l.x=i.width-75)):a.leftPressed&&(l.x-=7,l.x<0&&(l.x=0)),requestAnimationFrame(t)}()})();